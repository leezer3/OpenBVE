<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.trainsimframework.org/develop/object_animated.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 05 May 2012 22:30:47 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="SHORTCUT ICON" href="../Images/favicon.png" />
<meta name="keywords" content="openBVE,homepage" />
<title>The .animated object format</title>
</head>
<body style="font-family:sans-serif;font-size:small">
<font size="+2" color="#0080FF">The <b>.animated</b> object format</font><br />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ Contents</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
↷ <a href="#overview">1. Overview</a><br />
↷ <a href="#description">2. Sections</a><br />
↷ <a href="#operators">3. List of infix notation operators</a><br />
↷ <a href="#functions">4. List of functions</a><br />
↷ <a href="#variables">5. List of variables</a><br />
↷ <a href="#performance">6. Performance</a><br />
↷ <a href="#tips">7. Tips</a><br />
↷ <a href="#examples">8. Example functions</a><br />
↷ <a href="#grammar">9. Formal Grammar</a><br />
<br /><a name="overview" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 1. Overview</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
The ANIMATED object format is a container format allowing you to reference other objects (B3D/CSV/X) and to apply animation to them. It also allows to just group other objects (including other ANIMATED objects) without animating them.<br /><br />Animated objects can be used in CSV/RW routes (unless explicitly disallowed by some commands), as train exterior objects via the <em>extensions.cfg</em>, and as 3D cabs via the <em>panel.animated</em> file.<br /><br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Basics</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
Animation is performed via the following primitives:<br /><br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>State changes - basically allowing to switch between different objects at any time</td>
</tr></table>
<table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Translation - moving objects in three independent directions</td>
</tr></table>
<table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Rotation - rotating objects around three independent axes</td>
</tr></table>
<table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Texture shifts - allowing to shift the texture coordinates of objects in two independent directions</td>
</tr></table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● A little formality</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
The file is a plain text file encoded in any arbitrary <a href="information_encodings.html">encoding</a>, however, UTF-8 with a byte order mark is the preferred choice. The <a href="information_numberformats.html">parsing model</a> for numbers is <b>Strict</b>. The file name is arbitrary, but must have the extension <b>.animated</b>. The file is interpreted on a per-line basis, from top to bottom.<br /><br /><a name="description" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 2. Sections</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● The [Include] section</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
<br />You can use the [Include] section to just include other objects, but without animating them. This allows you to use the ANIMATED object file as a container to group other objects. There can be any number of [Include] sections within the file.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000">[Include]</font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
This starts the section.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><em>FileName<sub>0</sub></em><br />
<em>FileName<sub>1</sub></em><br />
<em>FileName<sub>2</sub></em><br />
...</font></td></tr></table>
Defines a series of B3D/CSV/X/ANIMATED objects that should be included as-is.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>Position = <em>X</em>, <em>Y</em>, <em>Z</em></b></font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
This defines the position of the objects, basically allowing you to offset them with respect to the rest of the ANIMATED object file.<br /><br /><hr />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● The [Object] section</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
<br />You can use the [Object] section to create a single animation. This requires to set up at least one state via the <em>States</em> parameter, and to use any combination of functions you want, which provide control over the animation. There can be any number of [Object] sections within the file.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000">[Object]</font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
This starts the section.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>Position = <em>X</em>, <em>Y</em>, <em>Z</em></b></font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
Defines the position of the object. This basically corresponds to a final TranslateAll command in the respective CSV/B3D file, but is performed after any of the functions are performed. For example, if you want to use rotation, then keep in mind that rotation is done around the origin (0,0,0). The <em>Position</em> command allows you to reposition the object after the rotation is performed.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>States = <em>File<sub>0</sub></em>, <em>File<sub>1</sub></em>, ..., <em>File<sub>n-1</sub></em></b></font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
Loads <em>n</em> objects of CSV/B3D/X extension. Please note that the first file indicated has state index 0. Use multiple files only if you want to use state changes.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>StateFunction = <em>Formula</em></b></font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
This defines the function for state changes. The result of the <em>Formula</em> is rounded toward the nearest integer. If that integer is between 0 and <em>n</em>-1, where <em>n</em> is the number of states as defined via <em>States</em>, the respective state is shown, otherwise, no object is shown. You can make use of the latter if you want an object to toggle on/off with only one state.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>TranslateXDirection = <em>X</em>, <em>Y</em>, <em>Z</em></b><br />
<b>TranslateYDirection = <em>X</em>, <em>Y</em>, <em>Z</em></b><br />
<b>TranslateZDirection = <em>X</em>, <em>Y</em>, <em>Z</em></b></font></td></tr></table>
These define the directions for the <em>TranslateXFunction</em>, <em>TranslateYFunction</em> and <em>TranslateZFunction</em>, respectively. The default directions are:<br /><br /><em>TranslateXDirection = 1, 0, 0</em><br /><em>TranslateYDirection = 0, 1, 0</em><br /><em>TranslateZDirection = 0, 0, 1</em><br /><br />This means that TranslateXFunction will move right by default, TranslateYFunction up and TranslateZFunction forward, which is also why TranslateXFunction and so on bear their names. If you define other directions, then simply think of the three functions and associated directions as three independent ways to move the object in that direction.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>TranslateXFunction = <em>Formula</em></b><br />
<b>TranslateYFunction = <em>Formula</em></b><br />
<b>TranslateZFunction = <em>Formula</em></b></font></td></tr></table>
These define the functions to move the object into the respective direction. The <em>Formula</em> needs to return the amount of meters to move from the initial position. The <em>X</em>, <em>Y</em> and <em>Z</em> parameters in the respective direction are multiplied by the result of <em>Formula</em>, so you could for example either multiple the formula by 2 or the direction by 2 if you want to double the speed of movement.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>RotateXDirection = <em>X</em>, <em>Y</em>, <em>Z</em></b><br />
<b>RotateYDirection = <em>X</em>, <em>Y</em>, <em>Z</em></b><br />
<b>RotateZDirection = <em>X</em>, <em>Y</em>, <em>Z</em></b></font></td></tr></table>
These define the directions for the <em>RotateXFunction</em>, <em>RotateYFunction</em> and <em>RotateZFunction</em>, respectively. The default directions are:<br /><br /><em>RotateXDirection = 1, 0, 0</em><br /><em>RotateYDirection = 0, 1, 0</em><br /><em>RotateZDirection = 0, 0, 1</em><br /><br />This means that RotateXFunction will rotate around the x-axis by default, RotateYFunction around the Y-axis, and RotateZFunction around the z-axis, which is also why RotateXFunction and so on bear their names. If you define other directions, then simply think of the three functions and associated directions as three independent ways to rotate the object.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>RotateXFunction = <em>Formula</em></b><br />
<b>RotateYFunction = <em>Formula</em></b><br />
<b>RotateZFunction = <em>Formula</em></b></font></td></tr></table>
These define the functions to rotate along the respective direction in counter-clockwise order. The <em>Formula</em> needs to return the angle by which to rotate in radians. The order in which the rotations are performed is: RotateXFunction (first), RotateYFunction (then) and RotateZFunction (last). If you use more than one rotation function at a time, bear this order in mind. If necessary, overwrite the default directions for the rotations if you need a different order.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>RotateXDamping = <em>NaturalFrequency</em>, <em>DampingRatio</em></b><br />
<b>RotateYDamping = <em>NaturalFrequency</em>, <em>DampingRatio</em></b><br />
<b>RotateZDamping = <em>NaturalFrequency</em>, <em>DampingRatio</em></b></font></td></tr></table>
These define damping for the corresponding functions. If not used, damping will not be performed. <em>NaturalFrequency</em> is a non-negative value corresponding to the angular frequency of an assumed undamped oscillator in radians per second. <em>DampingRatio</em> is a non-negative value indicating the type of damping. Values between 0 and 1 represent under-damping, 1 represents critical damping, and values above 1 represent over-damping.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>TextureShiftXDirection = <em>X</em>, <em>Y</em></b><br />
<b>TextureShiftYDirection = <em>X</em>, <em>Y</em></b></font></td></tr></table>
These define the directions for the <em>TextureShiftXFunction</em> and <em>TextureShiftYFunction</em>, respectively. The default directions are:<br /><br /><em>TextureShiftXDirection = 1, 0</em><br /><em>TextureShiftYDirection = 0, 1</em><br /><br />This means that TextureShiftXFunction will shift the texture right by default, and TextureShiftYFunction down, which is also why TextureShiftXFunction and so on bear their names. If you define other directions, then simply think of the two functions and associated directions as two independent ways to shift textures on the objects.<br /><br /><table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>TextureShiftXFunction = <em>Formula</em></b><br />
<b>TextureShiftYFunction = <em>Formula</em></b></font></td></tr></table>
These define the functions to shift the texture in the respective direction. The texture is shifted by the return value of <em>Formula</em> in texture coordinates. The integer part of the result is ignored, and a fractional part of 0.5 represents moving the texture half way. The SetTextureCoordinate commands in the object file define the coordinates, which are then added the outcome of these formulas.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<table border="0"><tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>TrackFollowerFunction = <em>Formula</em></b><br /></font></td></tr></table>
This defines the function which moves an object along the path of <b>Rail 0</b>. <em>Formula</em> must return a distance in meters, for which the object is then moved, respecting the curves and height changes of <b>Rail 0</b>.<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>TextureOverride = <em>Value</em></b></font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
<em>Value</em> = <b>Timetable</b>: All faces will show the timetable bitmap as set up by CSV/RW routes.<br /><em>Value</em> = <b>None</b>: The original textures will be displayed on the faces (default behavior).<br /><br /><table border="0">
<tr style="height:16"><td></td></tr>
<tr><td bgcolor="#F0F0F0" style="font-family: monospace;border:1px dotted;color:#808080"><font color="#C00000"><b>RefreshRate = <em>Seconds</em></b></font></td></tr>
</table>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font color="#808080">

</font></td></tr></table>
This defines the minimum amount of time that needs to pass before the functions are updated. A value of 0 forces the functions to be updated every frame. Please note that objects outside of the visual range might be updated less frequently regardless of this parameter. Use RefreshRate when you don't need a perfectly smooth animation (in order to optimize performance), or when you deliberately want the object to be only updated in fixed intervals.<br /><br /><hr />
<table cellspacing="0"><tr>
<td><font color="red">⚠</font></td>
<td>&nbsp;</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
<td bgcolor="#E0E0E0"><b>openBVE 2 compatibility note:</b> <br />
 During the development of openBVE (v0.9) and during the development of the animated object format, there were certain commands in existance ending in <em>RPN</em>, such as <em>TranslateXFunctionRPN</em>. These commands never made it into any official release (v1.0) and were thus never meant to be used outside of development environments. While they are still available undocumentedly, they will be removed for openBVE 2. If you are using these commands, please get rid of them as soon as possible.</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
</tr></table>
<hr />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● About the formulas</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
First of all, infix notation, which is what you can enter for <em>Formula</em>, is converted into functional notation. Thus for every infix notation, there is a corresponding functional notation. Some functions do not have an infix operator and can thus only be entered in functional notation. For operators, precedence plays an important role. You can use parantheses to override the order of precedence just as in any usual mathematical formula. Names of functions are case-insensitive.<br /><br /><table cellspacing="0"><tr>
<td><font color="red">⚠</font></td>
<td>&nbsp;</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
<td bgcolor="#E0E0E0">Please note that if the result of any mathematical operation or function would be infinity, indeterminate or non-real, 0 is returned. Numeric overflow is not prevented, so you need to take that into account yourself.</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
</tr></table>
<br /><a name="operators" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 3. List of infix notation operators</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Basic arithmetics</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Infix</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Functional</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> + <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Plus[<em>a</em>,<em>b</em>, ...]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Represents addition</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> - <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Subtract[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Represents subtraction</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>-<em>a</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Minus[<em>a</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Negates the number</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> * <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Times[<em>a</em>,<em>b</em>,...]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Represents multiplication</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> / <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Divide[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Represents division</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Comparisons</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
All comparisons return 1 for true and 0 for false.<br /><br />
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Infix</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Functional</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> == <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Equal[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> equals <em>b</em></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> != <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Unequal[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> does not equal <em>b</em></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> &lt; <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Less[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> is less than <em>b</em></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> &gt; <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Greater[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> is greater than <em>b</em></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> &lt;= <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>LessEqual[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> is less than or equal to <em>b</em></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> &gt;= <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>GreaterEqual[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> is greater than or equal to <em>b</em></td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Logical operations</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
All operations treat 0 as false and any other value as true, and return 1 for true and 0 for false.<br /><br />
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Infix</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Functional</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>!<em>a</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Not[<em>a</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if <em>a</em> is false</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> &amp; <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>And[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if both <em>a</em> and <em>b</em> are true</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> &#124; <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Or[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if any of <em>a</em> or <em>b</em> are true</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt><em>a</em> ^ <em>b</em></tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Xor[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">True (1) if either <em>a</em> or <em>b</em> is true</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Operator precedence</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
From highest precedence to lowest. Operators of same precedence are evaluated either left to right or right to left, depending on if they share a precedence with another operator.<br /><br />
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Operator</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Associativity</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Unparenthesized</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Equivalent</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">a[...]</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">unary</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">- (Minus)</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">unary</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>/</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">right-to-left</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1 / 2 / 3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">(1 / (2 / 3))</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>*</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">right-to-left</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1 * 2 * 3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">(1 * (2 * 3))</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>+</tt>, <tt>-</tt> (Subtract)</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">left-to-right</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">(1 + 2 + 3)</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">((1 + 2) + 3)</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>&#61;=</tt>, <tt>!=</tt>, <tt>&lt;</tt>, <tt>&gt;</tt>, <tt>&lt;=</tt>, <tt>&gt;=</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">left-to-right</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1 <= 2 <= 3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">((1 <= 2) <= 3)</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>!</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">unary</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>&amp;</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">right-to-left</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1 & 2 & 3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">(1 & (2 & 3))</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>^</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">right-to-left</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1 ^ 2 ^ 3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">(1 ^ (2 ^ 3))</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>&#124;</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">right-to-left</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1 | 2 | 3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">(1 | (2 | 3))</td></tr>
</table><br />
<table cellspacing="0"><tr>
<td><font color="red">⚠</font></td>
<td>&nbsp;</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
<td bgcolor="#E0E0E0">The logical not and multiplication operator are not at the same precedence level as a lot of other languages. For example <tt>!a + !b</tt> is <tt>!(a + !(b))</tt> <b>not</b> <tt>(!a) + (!b)</tt> as expected, similarly <tt>1 * 2 / 3</tt> is <tt>1 * (2 / 3)</tt> <b>not</b> <tt>(1 * 2) / 3</tt>.</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
</tr></table>
<br>
<table cellspacing="0"><tr>
<td><font color="red">⚠</font></td>
<td>&nbsp;</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
<td bgcolor="#E0E0E0">Please note that some combinations of prefix and infix operators are not recognized. For example <tt>a*-b</tt> is not accepted. Use <tt>a*(-b)</tt> or <tt>-b*a</tt> instead.</td>
<td bgcolor="#E0E0E0">&nbsp;</td>
</tr></table>
<br /><a name="functions" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 4. List of functions</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Basic arithmetics</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Function</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Reciprocal[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the reciprocal, equal to 1&#47;<em>x</em></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Power[<em>a</em>,<em>b</em>,...]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns <em>a</em> raised to the <em>b</em><sup>th</sup> power. <em>b</em> must be a non-negative number. For consistency, Power[0,<em>b</em>] always returns 1, even in the degenerate case Power[0,0], and <em>a</em> being negative always returns 0. Adding more arguments will create a chain. Power[a,b,c] will return <em>a</em><sup><em>b</em><sup><em>c</em></sup></sup>.</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Numeric functions</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Function</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Quotient[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Divides <em>a</em> by <em>b</em> and rounds the result down, equal to <tt>Floor[a/b]</tt>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Mod[<em>a</em>,<em>b</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the remainder of dividing <em>a</em> by <em>b</em>, equal to <tt>a-b*Floor[a/b]</tt>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Min[<em>a</em>,<em>b</em>,...]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the smallest of the terms.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Max[<em>a</em>,<em>b</em>,...]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the largest of the terms.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Abs[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the absolute value.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Sign[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the sign of <em>x</em>, which is either -1, 0 or 1.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Floor[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Rounds down to the nearest integer.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Ceiling[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Rounds up to the nearest integer.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Round[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Rounds to the nearest integer. Numbers ending in .5 are rounded to the nearest even integer.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>random[<em>Minimum</em>, <em>Maximum</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns a new random floating-point number between <em>Minimum</em> and <em>Maximum</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>randomInt[<em>Minimum</em>, <em>Maximum</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns a new random integer between <em>Minimum</em> and <em>Maximum</em>.</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Elementary functions</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Function</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Exp[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The exponential function, or <em>e</em> to the <em>x</em><sup>th</sup> power.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Log[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The natural logarithm, to base <em>e</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Sqrt[x]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The square root.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Sin[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The sine (input in radians).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Cos[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The cosine (input in radians).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Tan[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The tangent (input in radians).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>ArcTan[<em>x</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The inverse tangent (output in radians).</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Conditionals</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Function</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>If[<em>cond</em>,<em>truevalue</em>,<em>falsevalue</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">If <em>cond</em> is != 0, returns <em>truevalue</em>, otherwise <em>falsevalue</em></td></tr>
</table><br />
<a name="variables" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 5. List of variables</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Primitives</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>value</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The value returned by the function in the last evaluation. At the beginning of the simulation, this is 0.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>delta</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The time difference since the last evaluation of the function in seconds. Please note that there is no guaranteed time that elapses between successive function calls.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>currentState</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the current numerical state of the object.</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Time and camera</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>time</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current in-game time measured in seconds since midnight of the first day.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>cameraDistance</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The non-negative cartesian distance measured from the object to the camera in meters.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>cameraMode</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns 0 if the camera is currently in a 2D or 3D cab, 1 otherwise.</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Trains</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
Generally, objects attached to a particular train and car return values for that train and car, unless stated otherwise. For scenery objects, the reference is the driver's car of the nearest train (not necessarily the player's train).<br /><br />In some of the following variables, <em>carIndex</em> has the following meaning: 0 is the 1<sup>st</sup> car from the front, 1 is the 2<sup>nd</sup> car from the front, etc., while -1 is the 1<sup>st</sup> car from the rear, -2 is the 2<sup>nd</sup> car from the rear, etc. In general, car indices from -<em>cars</em> to <em>cars</em>-1 represent existing cars, where <em>cars</em> is the number of cars the train has, while values outside of this range represent non-existing cars. As all trains have at least 1 car, indices -1 and 0 are guaranteed to exist for any train.<br /><br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Trains (general)</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>cars</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The number of cars the train has.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>speed</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The signed actual speed of the current car in m/s. Is positive when the train travels forward, and negative when the train travels backward.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>speed[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The signed actual speed of the car <em>carIndex</em> in m/s. Is positive when the train travels forward, and negative when the train travels backward.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>speedometer</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The signed perceived speed of the current car in m/s as it would appear to a speedometer on wheel slip and wheel lock.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>speedometer[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The signed perceived speed of the car <em>carIndex</em> in m/s as it would appear to a speedometer on wheel slip and wheel lock.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>acceleration</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The actual acceleration of the current car in m/s².</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>acceleration[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The actual acceleration of the car <em>carIndex</em> in m/s².</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>accelerationMotor</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The acceleration which the motor of the first motor car currently generates in m/s².</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>accelerationMotor[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The acceleration which the motor of the car <em>carIndex</em> currently generates in m/s².</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>distance</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The non-negative cartesian distance measured from the object to the closest car in meters. Only meaningful for scenery objects.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>distance[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The non-negative cartesian distance measured from the object to the car <em>carIndex</em> in meters, or 0 if the car does not exist. Only meaningful for scenery objects.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>trackDistance</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The signed track distance measured from the object to the closest end of the nearest train in meters. Is positive when the train is in front of the object, negative when behind, and zero when the object lies between the ends of the train.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>trackDistance[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The signed track distance measured from the object to the car <em>carIndex</em> of the nearest train in meters. Is positive when the center of the car is in front of the object, and negative if behind. Returns 0 if the car does not exist. Only meaningful for scenery objects.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>destination</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The currently set destination for this train. (Set via <em>Track.Destination</em> or the plugin interface)</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Trains (brake)</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>mainReservoir</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the main reservoir in this car, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>mainReservoir[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the main reservoir in car <em>carIndex</em>, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>emergencyReservoir</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the emergency reservoir in this car, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>emergencyReservoir[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the emergency reservoir in car <em>carIndex</em>, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakePipe</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the brake pipe in this car, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakePipe[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the brake pipe in car <em>carIndex</em>, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakeCylinder</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the brake cylinder in this car, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakeCylinder[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the brake cylinder in car <em>carIndex</em>, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>straightAirPipe</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the straight air pipe in this car, measured in Pa.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>straightAirPipe[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current pressure in the straight air pipe in car <em>carIndex</em>, measured in Pa.</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Trains (doors)</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>doors</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the doors. Returns 0 if fully closed, 1 if fully opened, or any intermediate value, biasing doors that are in a more open state.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>doors[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the doors of car <em>carIndex</em>. Returns 0 if fully closed, 1 if fully opened, or any intermediate value, biasing doors that are in a more open state.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>leftDoors</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the left doors. Returns 0 if fully closed, 1 if fully opened, or any intermediate value, biasing doors that are in a more open state.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>leftDoors[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the left doors of car <em>carIndex</em>. Returns a value between 0 and 1, biasing doors that are in a more open state, or -1 if the car does not exist.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>rightDoors</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the right doors. Returns 0 if fully closed, 1 if fully opened, or any intermediate value, biasing doors that are in a more open state.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>rightDoors[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the right doors of car <em>carIndex</em>. Returns a value between 0 and 1, biasing doors that are in a more open state, or -1 if the car does not exist.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>leftDoorsTarget</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The anticipated target state of the left doors. Returns either 0 (closed) or 1 (opened).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>leftDoorsTarget[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The anticipated target state of the left doors of car <em>carIndex</em>. Returns either 0 (closed) or 1 (opened).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>rightDoorsTarget</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The anticipated target state of the right doors. Returns either 0 (closed) or 1 (opened).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>rightDoorsTarget[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The anticipated target state of the right doors of car <em>carIndex</em>. Returns either 0 (closed) or 1 (opened).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>leftDoorsButton</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the left doors button. Returns either 0 (released) or 1 (pressed).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>rightDoorsButton</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the right doors button. Returns either 0 (released) or 1 (pressed).</td></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Trains (miscellaneous)</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>

<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>reverserNotch</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the reverser, which is either -1 (backward), 0 (neutral), or forward (1).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>powerNotch</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current power notch, i.e. 0 for N, 1 for P1, 2 for P2, 3 for P3, etc.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>powerNotches</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The amount of power notches the train has.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakeNotch</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current brake notch.<table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains without the automatic air brake: 0 for N, 1 for B1, 2 for B2, 3 for B3, etc.</td>
</tr></table><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains with the automatic air brake: 0 for REL, 1 for LAP and 2 for SRV.</td>
</tr></table></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakeNotches</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The amount of brake notches the train has. For trains with the automatic air brake, this returns 2.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakeNotchLinear</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">A combination of brake notch, hold brake and emergency brake.<br />
<table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains without the automatic air brake and without hold brake: 0 for N, 1 for B1, 2 for B2, 3 for B3, etc., up to <em>BrakeNotches</em>+1 for EMG.</td>
</tr></table><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains without the automatic air brake but with hold brake: 0 for N, 1 for HLD, 2 for B1, 3 for B2, 4 for B3, etc., up to <em>BrakeNotches</em>+2 for EMG.</td>
</tr></table><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains with the automatic air brake: 0 for REL, 1 for LAP, 2 for SRV or 3 for EMG.</td>
</tr></table></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>brakeNotchesLinear</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The highest value returned by <em>brakeNotchesLinear</em>.<table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains without the automatic air brake and without hold brake, this is <em>BrakeNotches</em>+1.</td>
</tr></table><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains without the automatic air brake but with hold brake, this is <em>BrakeNotches</em>+2.</td>
</tr></table><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>For trains with the automatic air brake, this returns 3.</td>
</tr></table></td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>locoBrake</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The current Loco Brake notch.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>locoBrakeNotches</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The amount of Loco Brake notches the train has.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>emergencyBrake</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the emergency brake is currently active (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>hasAirBrake</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the train has the automatic air brake (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>holdBrake</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the hold brake is currently active (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>hasHoldBrake</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the train has a hold brake (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>constSpeed</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the const speed system is currently active (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>hasConstSpeed</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the train has a const speed system (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>hasPlugin</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Whether the train uses a plugin (1) or not (0).</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>pluginState[<em>i</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The state of the i<sup>th</sup> plugin variable, returning an integer depending on the plugin. Is the same as ats<em>i</em> in the panel2.cfg.</td></tr>

<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>FrontAxleCurveRadius[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the curve radius at the front axle position of car <em>carIndex</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>RearAxleCurveRadius[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the curve radius at the rear axle position of car <em>carIndex</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>CurveCant[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the cant value for car <em>carIndex</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Pitch[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the pitch value for car <em>carIndex</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Odometer</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns a signed number representing the distance in meters travelled by the current car.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Odometer[<em>carIndex</em>]</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns a signed number representing the distance in meters travelled by car <em>carIndex</em>.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>Klaxon</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns the currently playing horn (if any) as follows: (0) No horns are playing (1) The primary horn is playing (2) The secondary horn is playing (3) The music horn is playing. <em>Note</em> If multiple horns are playing, the lowest value will be returned.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>PrimaryKlaxon</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns 1 if the primary horn is currently playing, 0 otherwise.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>SecondaryKlaxon</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns 1 if the secondary horn is currently playing, 0 otherwise.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>MusicKlaxon</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Returns 1 if the music horn is currently playing, 0 otherwise.</td></tr>
</table><br />
If <em>pluginState[i]</em> is used with the built-in safety systems ATS and ATC, the following mappings for <em>i</em> apply:<br /><br />
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"><em>i</em></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">English</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">日本語</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Return values</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">pluginState[271]</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Meaning</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">256</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC not available</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">257</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS RUN</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS 作動</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit), 1 (lit) or 2 (flashing)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">258</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS RUN</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS 作動</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit / non-flashing), 1 (lit / flashing)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">2</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">15 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">259</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">P POWER</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">P 電源</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">3</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">25 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">260</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">PTN APPROACH</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">パターン接近</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">4</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">45 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">261</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">BRAKE RELEASE</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ブレーキ開放</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">5</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">55 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">262</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">BRAKE APPLY</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ブレーキ動作</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">6</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">65 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">263</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS P</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS-P</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">7</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">75 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">264</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">FAILURE</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">故障</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">8</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">90 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">265</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">9</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">100 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">266</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC POWER</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC 電源</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">10</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">110 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">267</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC SRV</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC 常用</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">11</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">120 km/h</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">268</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC EMG</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC 非常</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">12</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATS is active</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">269</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">CONST SPEED</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">定速</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">270</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">EB</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">EB</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 (unlit) or 1 (lit)</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">271</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">ATC speed indicator</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0 - 12, see table on the right</td><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"></th></tr>
</table><br />
<table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Sections (signalling)</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
The section context is defined when the object is placed using Track.SigF.<br /><br />
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Variable</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Description</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><tt>section</tt></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The value of the section aspect currently shown.<br />
<em>If this variable is used outside of a Track.SigF context, the behavior is currently undefined and subject to change.</em></td></tr>
</table><br />
<a name="performance" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 6. Performance</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
There are certain kinds of animation which are less expensive, and others which are more. Also, the underlying object plays a significant role. If you want to design your animated objects with as best performance as possible <b>for future releases of openBVE</b>, take a look at the following performance table:<br /><br />
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"> Animation</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"> Object</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;"> Performance</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">State changes</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has only opaque faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Good</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">State changes</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has partially transparent faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Moderate</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Translation</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has only opaque faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Good</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Translation</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has partially transparent faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Moderate</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Rotation</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has only opaque faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Good</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Rotation</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has partially transparent faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Bad</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Texture shifts</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has only opaque faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Bad</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Texture shifts</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Has partially transparent faces</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Bad</td></tr>
</table><br />
Performance is generally better if the result of a function only infrequently changes. So, even if you set the <em>RefreshRate</em> parameter to zero, performance is generally better if the outcome of your formula is constant over longer periods of time. On the other hand, if it changes every frame, performance is generally worse.<br /><br />Generally, you should avoid using animation with partially transparent faces and stick to opaque faces when possible. Also, try to avoid texture shifts, and consider using state changes or translation where possible.<br /><br /><a name="tips" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 7. Tips</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Generally speaking, try to keep the complexity of functions as low as possible. This is not the most critical aspect, though, as most of the performance impact will result from applying the results of a function, e.g. rotating the object, and not evaluating the function.</td>
</tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Use the RefreshRate parameter when possible to optimize performance. Usually, you can use this parameter when you don't need a smooth animation, or when you deliberately want the functions to only update in intervals.</td>
</tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Don't use functions which always evaluate to the same constant. For example, don't use RotateXFunction = 3.14159, but rotate the underlying CSV/B3D/X object directly.</td>
</tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>State changes are very cheap as long as the state doesn't actually change in between two executions of the StateFunction. If a change occurs, this is a relatively expensive operation, though.</td>
</tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Try to optimize out <em>if</em> conditions. Especially try to avoid nested <em>if</em> functions. Often, there is an elegant mathematical solution.</td>
</tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>Certain functions, e.g. Exp, Sin, Cos, etc., are relatively expensive. Use them only if absolutely necessary for an effect. Don't include unnecessary operations. For example, the result of StateFunction is automatically rounded toward the nearest integer, so don't apply an additional explicit Round.</td>
</tr></table>
<br /><table cellspacing="0"><tr>
<td valign="top">●</td>
<td>&nbsp;</td>
<td>When working with car objects, bear in mind that some variables have an optional car index. You should use this index if you want to query the state of a particular car (that is, not necessarily the one the object is attached to). If, however, you just want to query the value of the particular car the object is attached to, use the variable without the index. For scenery objects, you should not generally use car indices as you can't be sure how many cars the queried train has.</td>
</tr></table>
<br /><a name="examples" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 8. Example functions</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Blinking light</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
<table>
<tr>
<td width="16" valign="top" /><td>
<font size="-1"><em>Template for a blinking light:</em></font>
</td></tr><tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed;">
<tt>States = <em>OBJECT0</em>, <em>OBJECT1</em><br />
StateFunction = value == 0<br />
RefreshRate = <em>SECONDS</em></tt></td>
</tr>
</table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Rotating wheel</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
<table>
<tr>
<td width="16" valign="top" /><td>
<font size="-1"><em>Template for the code used in an exterior car object:</em></font>
</td></tr><tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed;">
<tt>States = <em>OBJECT</em><br />
RotateXFunction = value + delta * speedometer / <em>RADIUS_OF_THE_WHEEL</em></tt></td>
</tr>
</table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Cycling through a list of objects</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
<table>
<tr>
<td width="16" valign="top" /><td>
<font size="-1"><em>Template for objects that are to be cycled through:</em></font>
</td></tr><tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed;">
<tt>States = <em>OBJECT0</em>, <em>OBJECT1</em>, <em>OBJECT2</em>, ...<br />
StateFunction = mod[value + 1, <em>AMOUNT_OF_OBJECTS</em>]<br />
RefreshRate = <em>TIME_PER_OBJECT</em></tt></td>
</tr>
</table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Signal (3-aspect) for Track.Section(0; 2; 4)</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
<table>
<tr>
<td width="16" valign="top" /><td>
<font size="-1"><em></em></font>
</td></tr><tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed;">
<tt>States = <em>RED_OBJECT</em>, <em>YELLOW_OBJECT</em>, <em>GREEN_OBJECT</em><br />
StateFunction = section / 2</tt></td>
</tr>
</table>
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font color="#0080FF">● Employing an approach-controlled delay in signals</font>
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td><font size="-1" color="#808080">

</font></td></tr></table>
<table><tr style="height: 2px;"><td /></tr></table>
If you want to create a signal that keeps being red until the train approaches it to some distance, then counts down a timer before it changes aspect to green, please refer to <a href="http://openbve.freeforums.org/delay-in-approach-controlled-signals-t1195.html#p5378">this post</a> on the forum for a detailed explanation. Once you understand the concepts, you can use this code template:<br /><table>
<tr>
<td width="16" valign="top" /><td>
<font size="-1"><em>Template for an approach-controlled delay in a signal with two aspects:</em></font>
</td></tr><tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed;">
<tt>States = <em>RED_OBJECT</em>, <em>GREEN_OBJECT</em><br />
StateFunction = if[trackDistance&gt;DISTANCE | section==0, 0, min[value + 0.5*delta/DELAY, 1]]</tt></td>
</tr>
</table>
<table>
<tr>
<td width="16" valign="top" /><td>
<font size="-1"><em>Template for an approach-controlled delay in a signal with any number of aspects:</em></font>
</td></tr><tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed;">
<tt>States = <em>RED_OBJECT</em>, ..., <em>GREEN_OBJECT</em><br />
StateFunction = if[trackDistance&gt;DISTANCE | section==0, 0, if[value&lt;0.5, value + 0.5*value/DELAY, section]]</tt></td>
</tr>
</table>

<a name="grammar" />
<br /><table><tr style="height: 4px;"><td /></tr></table>
<font size="+1" color="#0080FF">■ 9. Formal Grammar</font><hr />
<table style="border:0px none;margin-left:10pt;margin-right:10pt;">
<tr><td>

The formal grammar for the language may not match up perfectly with the implimentation included in OpenBVE. An example is a*-b which is valid under the grammar but the parser rejects it.
</td></tr></table>
<div style="float: left; overflow:auto; width: 100%; height: 100%">
<div style="width:960px;">
<table>
<tr>
<td width="16" valign="top">▶</td><td bgcolor="#D4D8FF" style="border:1px dashed">
<tt>
&lt;expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;xor_expression&gt; "&amp;" &lt;expression&gt;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;xor_expression&gt;</br>
&lt;xor_expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;or_expression&gt;&nbsp; "^" &lt;xor_expression&gt; | &lt;or_expression&gt;</br>
&lt;or_expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;not_expression&gt; "|" &lt;or_expression&gt;&nbsp; | &lt;not_expression&gt;</br>
</br>
&lt;not_expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;::= "!" &lt;equal_expression&gt; | &lt;equal_expression&gt;</br>
</br>
&lt;equal_expression&gt;&nbsp;&nbsp;::= &lt;plus_expression&gt; ("==" &lt;plus_expression&gt;)* | &lt;plus_expression&gt; ("!=" &lt;plus_expression&gt;)*</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;plus_expression&gt; ("&gt;"&nbsp; &lt;plus_expression&gt;)* | &lt;plus_expression&gt; ("&lt;"&nbsp; &lt;plus_expression&gt;)* | </br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;plus_expression&gt; ("&lt;=" &lt;plus_expression&gt;)* | &lt;plus_expression&gt; ("&lt;=" &lt;plus_expression&gt;)* | &lt;plus_expression&gt;</br>
</br>
&lt;plus_expression&gt;&nbsp;&nbsp;&nbsp;::= &lt;times_expression&gt; ("+" &lt;times_expression&gt;)*&nbsp; | &lt;times_expression&gt; ("-" &lt;times_expression&gt;)* | &lt;times_expression&gt;</br>
</br>
&lt;times_expression&gt;&nbsp;&nbsp;::= &lt;divide_expression&gt; "*" &lt;times_expression&gt;&nbsp; | &lt;divide_expression&gt;</br>
&lt;divide_expression&gt;&nbsp;::= &lt;minus_expression&gt;&nbsp; "/" &lt;divide_expression&gt; | &lt;minus_expression&gt;</br>
</br>
&lt;minus_expression&gt;&nbsp;&nbsp;::= "-" &lt;function_call&gt; | &lt;function_call&gt;</br>
&lt;function_call&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;name&gt; "[" &lt;expression&gt; ("," &lt;expression&gt;)* "]" | &lt;term&gt;</br>
</br>
&lt;term&gt;&nbsp;&nbsp;&nbsp;::= "(" &lt;expression&gt; ")" | &lt;name&gt; | &lt;number&gt;</br>
&lt;number&gt;&nbsp;::= &lt;digit&gt;*</br>
&lt;name&gt;&nbsp;&nbsp;&nbsp;::= &lt;letter&gt; (&lt;letter&gt; | &lt;digit&gt;)*</br>
</br>
&lt;letter&gt;&nbsp;::= "A" | "B" | "C" | "D" | "E" | "F" | "G" | "H" | "I" | "J" | "K" | "L" | "M" |</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"N" | "O" | "P" | "Q" | "R" | "S" | "T" | "U" | "V" | "W" | "X" | "Y" | "Z" |</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"a" | "b" | "c" | "d" | "e" | "f" | "g" | "h" | "i" | "j" | "k" | "l" | "m" |</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"n" | "o" | "p" | "q" | "r" | "s" | "t" | "u" | "v" | "w" | "x" | "y" | "z"</br>
&lt;digit&gt;&nbsp;&nbsp;::= "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"</br>
</br>
</tt></td>
</tr>
</table>
</div></div>
</body>

<!-- Mirrored from www.trainsimframework.org/develop/object_animated.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 05 May 2012 22:30:47 GMT -->
</html>